{% extends "admin/base_site.html" %}
{% block content %}
<h1>
  {% if store_obj %}Doanh thu cửa hàng: {{ store_obj.name }}{% else %}{{ title }}{% endif %}
</h1>
<form method="get" style="margin-bottom:12px">
  {% if store_obj %}
    <input type="hidden" name="store_id" value="{{ store_obj.id }}">
  {% endif %}
  {{ form.month.label_tag }} {{ form.month }}
  {{ form.year.label_tag }} {{ form.year }}
  <button class="button" type="submit">Lọc</button>
  {% if store_obj %}
    <a class="button" href="{% url 'admin:top_stores_report' %}">Xem tất cả</a>
  {% endif %}
</form>
{% if data %}
<table class="adminlist">
  <thead>
    <tr>
      <th>#</th>
      <th>Cửa hàng</th>
      <th>Doanh thu</th>
      <th>Số đơn</th>
      <th>Avg Order Value</th>
    </tr>
  </thead>
  <tbody>
    {% for row in data %}
    <tr>
      <td>{{ forloop.counter }}</td>
      <td>{{ row.store__name }}</td>
      <td>{{ row.revenue|floatformat:2 }}</td>
      <td>{{ row.orders_count }}</td>
      <td>{{ row.avg_order_value|floatformat:2 }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<p>Không có dữ liệu.</p>
{% endif %}
{% endblock %}